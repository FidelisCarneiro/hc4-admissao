<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HC4 ‚Ä¢ Ficha de Admiss√£o</title>
  <link rel="stylesheet" href="./css/style.css" />
  <link rel="icon" href="./assets/logo-hc4.png" />
</head>
<body>
  <div class="bg-shapes"></div>

  <main class="shell">
    <header class="topbar">
      <img class="logo" src="./assets/logo-hc4.png" alt="HC4" />
      <div class="topbar-text">
        <h1>Ficha de Admiss√£o</h1>
        <p id="whoami">Carregando‚Ä¶</p>
      </div>
      <div class="topbar-actions">
        <a class="btn" href="./admin.html" id="adminLink" style="display:none;">Admin</a>
        <button class="btn" id="btnLogout">Sair</button>
      </div>
    </header>

    <!-- DADOS PESSOAIS -->
    <section class="card">
      <div class="card-title">
        <div class="icon-badge">üßë‚Äçüíº</div>
        <h2>Dados do Colaborador</h2>
      </div>

      <form id="mainForm">
        <div class="grid grid-3">
          <label class="field">
            <span>Nome completo</span>
            <input name="nome" required />
          </label>

          <label class="field">
            <span>CPF</span>
            <input name="cpf" inputmode="numeric" maxlength="11" required />
            <small class="hint">Somente n√∫meros, 11 d√≠gitos</small>
          </label>

          <label class="field">
            <span>Data de nascimento</span>
            <input name="nascimento" type="date" required />
            <small class="hint">No PDF sai dd/mm/aaaa</small>
          </label>

          <label class="field">
            <span>E-mail</span>
            <input name="email" type="email" />
          </label>

          <label class="field">
            <span>Telefone</span>
            <input name="tel" placeholder="(xx) xxxxx-xxxx" />
          </label>

          <label class="field">
            <span>Estado civil</span>
            <select name="estado_civil" id="estadoCivil" required>
              <option value="">Selecione</option>
              <option>Solteiro(a)</option>
              <option>Casado(a)</option>
              <option>Uni√£o Est√°vel</option>
              <option>Divorciado(a)</option>
              <option>Vi√∫vo(a)</option>
            </select>
          </label>

          <label class="field" id="wrapDataCasamento" style="display:none;">
            <span>Data de casamento</span>
            <input name="data_casamento" type="date" />
          </label>

          <label class="field">
            <span>Nome da m√£e</span>
            <input name="mae" />
          </label>

          <label class="field">
            <span>Nome do pai</span>
            <input name="pai" />
          </label>
        </div>

        <div class="grid grid-3">
          <label class="field">
            <span>Naturalidade (cidade)</span>
            <input name="naturalidade_cidade" />
          </label>
          <label class="field">
            <span>Naturalidade (UF)</span>
            <input name="naturalidade_uf" maxlength="2" placeholder="MG" />
          </label>

          <label class="field">
            <span>Indica√ß√£o (nome)</span>
            <input name="indicacao_nome" />
          </label>
          <label class="field">
            <span>Indica√ß√£o (telefone)</span>
            <input name="indicacao_tel" placeholder="(xx) xxxxx-xxxx" />
          </label>

          <label class="field">
            <span>Contato de emerg√™ncia (nome)</span>
            <input name="emerg_nome" required />
          </label>
          <label class="field">
            <span>Contato de emerg√™ncia (telefone)</span>
            <input name="emerg_tel" placeholder="(xx) xxxxx-xxxx" required />
          </label>
        </div>

        <div class="grid grid-3">
          <label class="field">
            <span>RG (n√∫mero)</span>
            <input name="rg_numero" />
          </label>
          <label class="field">
            <span>RG (√≥rg√£o emissor)</span>
            <input name="rg_orgao" placeholder="SSP" />
          </label>
          <label class="field">
            <span>RG (UF)</span>
            <input name="rg_uf" maxlength="2" placeholder="MG" />
          </label>
          <label class="field">
            <span>Data de emiss√£o do RG</span>
            <input name="rg_emissao" type="date" />
          </label>
        </div>

        <div class="grid grid-3">
          <label class="field">
            <span>CNH (n√∫mero)</span>
            <input name="cnh_numero" />
          </label>
          <label class="field">
            <span>CNH (categoria)</span>
            <input name="cnh_categoria" placeholder="B" />
          </label>
          <label class="field">
            <span>Vencimento CNH</span>
            <input name="cnh_vencimento" type="date" />
          </label>
        </div>

        <div class="divider"></div>

        <!-- ENDERE√áO -->
        <div class="card-subtitle">
          <div class="icon-badge sm">üè†</div>
          <h3>Endere√ßo</h3>
        </div>

        <div class="grid grid-3">
          <label class="field">
            <span>Logradouro (Rua/Avenida)</span>
            <input name="logradouro" required />
          </label>
          <label class="field">
            <span>N√∫mero</span>
            <input name="numero" required />
          </label>
          <label class="field">
            <span>Complemento</span>
            <input name="complemento" />
          </label>
          <label class="field">
            <span>Bairro</span>
            <input name="bairro" required />
          </label>
          <label class="field">
            <span>Cidade</span>
            <input name="cidade" required />
          </label>
          <label class="field">
            <span>UF</span>
            <input name="end_uf" maxlength="2" placeholder="MG" required />
          </label>
          <label class="field">
            <span>CEP</span>
            <input name="cep" inputmode="numeric" maxlength="8" required />
          </label>
          <label class="field">
            <span>Local de refer√™ncia</span>
            <input name="referencia" />
          </label>
        </div>

        <div class="divider"></div>

        <!-- DADOS BANC√ÅRIOS -->
        <div class="card-subtitle">
          <div class="icon-badge sm">üè¶</div>
          <h3>Dados Banc√°rios</h3>
        </div>

        <div class="grid grid-3">
          <label class="field">
            <span>Banco</span>
            <input name="banco" value="Ita√∫" readonly />
            <small class="hint">Obrigat√≥rio: Banco Ita√∫</small>
          </label>
          <label class="field">
            <span>Ag√™ncia</span>
            <input name="agencia" required />
          </label>
          <label class="field">
            <span>Conta</span>
            <input name="conta" required />
          </label>
        </div>

        <div class="divider"></div>

        <!-- DEPENDENTES IRPF -->
        <div class="card-subtitle">
          <div class="icon-badge sm">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
          <h3>Dependentes IRPF</h3>
        </div>
        <div id="depsIRPF" class="repeater"></div>
        <button class="btn" type="button" id="addDepIR">+ Adicionar dependente IRPF</button>

        <div class="divider"></div>

        <!-- PLANO DE SA√öDE -->
        <div class="card-subtitle">
          <div class="icon-badge sm">ü©∫</div>
          <h3>Plano de Sa√∫de</h3>
        </div>

        <div class="grid grid-3">
          <label class="field">
            <span>Possui plano atualmente?</span>
            <select name="plano_possui">
              <option value="N√£o" selected>N√£o</option>
              <option value="Sim">Sim</option>
            </select>
          </label>
          <label class="field">
            <span>Operadora</span>
            <input name="plano_operadora" />
          </label>
          <label class="field">
            <span>Matr√≠cula / N¬∫ Benefici√°rio</span>
            <input name="plano_matricula" />
          </label>
        </div>

        <div class="card-subtitle" style="margin-top:10px;">
          <div class="icon-badge sm">üßæ</div>
          <h3>Dependentes Plano de Sa√∫de</h3>
        </div>
        <div id="depsPLANO" class="repeater"></div>
        <button class="btn" type="button" id="addDepPL">+ Adicionar dependente Plano</button>

        <div class="divider"></div>

        <!-- FOTO + ASSINATURA -->
        <div class="card-subtitle">
          <div class="icon-badge sm">üì∏</div>
          <h3>Foto e Assinatura</h3>
        </div>

        <div class="grid grid-2">
          <label class="field">
            <span>Foto 3x4 (imagem)</span>
            <input type="file" id="fotoFile" accept="image/*" required />
            <small class="hint">Vai aparecer como um quadrado nos dois PDFs.</small>
          </label>

          <div class="field">
            <span>Assinatura (use mouse ou dedo)</span>
            <div class="sig-wrap">
              <canvas id="sigCanvas" width="700" height="220"></canvas>
              <div class="sig-actions">
                <button class="btn" type="button" id="sigClear">Limpar</button>
              </div>
            </div>
            <small class="hint">Assinatura √∫nica usada nos 2 PDFs. N√£o precisa nome.</small>
          </div>
        </div>

        <div class="divider"></div>

        <!-- ANEXOS -->
        <div class="card-subtitle">
          <div class="icon-badge sm">üìé</div>
          <h3>Anexos (PDF leg√≠vel)</h3>
        </div>

        <div class="note">
          ‚úÖ O sistema avalia legibilidade (PDF e imagem). Se a pontua√ß√£o estiver baixa, ele avisa antes de enviar.
        </div>

        <div id="docs" class="docs"></div>

        <div class="actions bottom">
          <button class="btn" type="button" id="btnPreview">Pr√©-visualizar PDFs</button>
          <button class="btn primary" type="submit" id="btnSend">Gerar PDFs + ZIP + Enviar</button>
        </div>

        <div id="formMsg" class="msg"></div>
      </form>
    </section>

    <footer class="footer">
      <span id="footerUser"></span>
    </footer>
  </main>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@4.4.168/build/pdf.min.mjs" type="module"></script>

  <script type="module" src="./js/form.js"></script>
</body>
</html>
